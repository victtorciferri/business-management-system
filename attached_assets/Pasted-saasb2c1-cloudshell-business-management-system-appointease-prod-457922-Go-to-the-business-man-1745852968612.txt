saasb2c1@cloudshell:~/business-management-system (appointease-prod-457922)$ # Go to the business-management-system directory
cd ~/business-management-system

# Check if we have a dist directory (built frontend)
ls -la dist/

# Create a more robust start.sh script
cat > start.sh << 'EOF'
#!/bin/bash
echo "Starting Cloud SQL Auth Proxy..."
cloud_sql_proxy -instances=$CLOUD_SQL_CONNECTION_NAME=tcp:5432 &
PROXY_PID=$!
echo "Waiting for proxy to initialize on process $PROXY_PID..."
sleep 10

# Check the npm scripts
if grep -q "\"start\":" package.json; then
  echo "Starting the application using npm start..."
  npm start
elif [ -f "server/index.js" ]; then
  echo "Starting the application using server/index.js..."
  node server/index.js
else
  echo "Looking for main application file..."
  for file in index.js server.js app.js main.js; do
    if [ -f "$file" ]; then
      echo "Found $file, starting application..."
      node $file
      break
    fi
  done
fi
EOF
chmod +x start.sh

# Create a Dockerfile that handles the entry point more carefully
cat > Dockerfile << 'EOF'
  --add-cloudsql-instances=${INSTANCE_CONNECTION_NAME}ppointease-secret-key,DATABASE_URL=postgresql://postgres:AppointEase123!@localhost:5432/postgres,CLOUD_SQL_CONNECTION_NAME=${INSTANCE_C
total 3936
drwxrwxr-x  3 saasb2c1 saasb2c1    4096 Apr 27 14:15 .
drwxrwxr-x 15 saasb2c1 saasb2c1    4096 Apr 28 15:02 ..
-rw-rw-r--  1 saasb2c1 saasb2c1 4014905 Apr 27 14:15 index.js
drwxrwxr-x  3 saasb2c1 saasb2c1    4096 Apr 28 00:06 public
Your active configuration is: [cloudshell-643]
-bash: !@localhost: event not found
Building using Dockerfile and deploying container to Cloud Run service [appointease] in project [appointease-prod-457922] region [southamerica-west1]
\  Building and deploying... Uploading sources.                                                                                                                                             
\  Building and deploying... Uploading sources.                                                                                                                                             
X  Building and deploying... Building Container.                                                                                                                                            
  OK Uploading sources...                                                                                                                                                                   
  OK Building Container... Logs are available at [https://console.cloud.google.com/cloud-build/builds;region=southamerica-west1/9fcf2c3a-6a8a-4824-95d4-d984ca0e733e?project=249754346416]. 
  -  Creating Revision...                                                                                                                                                                   
Creating temporary archive of 371 file(s) totalling 35.0 MiB before compression.
  OK Setting IAM Policy...                                                                                                                                                                  
Deployment failed                                                                                                                                                                           
ERROR: (gcloud.run.deploy) Revision 'appointease-00074-pmq' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=appointease-prod-457922&resource=cloud_run_revision/service_name/appointease/revision_name/appointease-00074-pmq&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22appointease%22%0Aresource.labels.revision_name%3D%22appointease-00074-pmq%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
saasb2c1@cloudshell:~/business-management-system (appointease-prod-457922)$ 