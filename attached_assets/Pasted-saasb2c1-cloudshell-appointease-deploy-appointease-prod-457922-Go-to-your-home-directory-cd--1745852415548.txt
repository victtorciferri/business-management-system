saasb2c1@cloudshell:~/appointease-deploy (appointease-prod-457922)$ # Go to your home directory
cd ~

# Clone the repository from Replit (assuming you have a Git repo - if not, we can create one)
git clone https://github.com/victtorciferri/business-management-system.git
cd ~/appointease-deploy

# Now let's set up the necessary files for deployment

# 1. Create a start.sh script for the Cloud SQL Auth Proxy
cat > start.sh << 'EOF'
#!/bin/bash
echo "Starting Cloud SQL Auth Proxy..."
cloud_sql_proxy -instances=$CLOUD_SQL_CONNECTION_NAME=tcp:5432 &
echo "Waiting for proxy to initialize..."
sleep 10
echo "Starting AppointEase..."
node server/index.js
EOF
chmod +x start.sh

# 2. Create a Dockerfile
cat > Dockerfile << 'EOF'
FROM node:20-slim

# Install the Cloud SQL Auth Proxy
RUN apt-get update && apt-get install -y wget
RUN wget https://dl.google.com/cloudsql/cloud_sql_proxy.linux.amd64 -O /usr/local/bin/cloud_sql_proxy
RUN chmod +x /usr/local/bin/cloud_sql_proxy

WORKDIR /app

# Copy package files and install dependencies
COPY package*.json ./
RUN npm install

# Copy the entire application
  --add-cloudsql-instances=${INSTANCE_CONNECTION_NAME}ppointease-secret-key,DATABASE_URL=postgresql://postgres:AppointEase123!@localhost:5432/postgres,CLOUD_SQL_CONNECTION_NAME=${INSTANCE_C
fatal: destination path 'business-management-system' already exists and is not an empty directory.
Your active configuration is: [cloudshell-643]
-bash: !@localhost: event not found
Building using Dockerfile and deploying container to Cloud Run service [appointease] in project [appointease-prod-457922] region [southamerica-west1]
\  Building and deploying... Uploading sources.                                                                                                                                             
  \  Uploading sources...                                                                                                                                                                   
X  Building and deploying... Building Container.                                                                                                                                            
  OK Uploading sources...                                                                                                                                                                   
  -  Building Container... Logs are available at [https://console.cloud.google.com/cloud-build/builds;region=southamerica-west1/76c43b55-e533-4435-8d27-9d48c52ddff1?project=249754346416]. 
  .  Setting IAM Policy...                                                                                                                                                                  
Creating temporary archive of 3 file(s) totalling 790 bytes before compression.
Uploading zipfile of [.] to [gs://run-sources-appointease-prod-457922-southamerica-west1/services/appointease/1745852348.666408-37ae7459ea99402bb52c5669a6f69897.zip]
Deployment failed                                                                                                                                                                           
ERROR: (gcloud.run.deploy) Build failed; check build logs for details
saasb2c1@cloudshell:~/appointease-deploy (appointease-prod-457922)$ 