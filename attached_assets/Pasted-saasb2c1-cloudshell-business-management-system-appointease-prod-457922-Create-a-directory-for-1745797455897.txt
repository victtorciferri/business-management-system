saasb2c1@cloudshell:~/business-management-system (appointease-prod-457922)$ # Create a directory for a simplified version of the main app
mkdir -p simplified-app
cd simplified-app

# Create a simplified server file for our main app
cat > index.js << 'EOF'
const express = require('express');
const fs = require('fs');
const path = require('path');
const app = express();
const port = process.env.PORT || 8080;

// Serve static files from the dist/public directory if it exists
const publicDir = path.join(__dirname, 'dist/public');
if (fs.existsSync(publicDir)) {
  app.use(express.static(publicDir));
}

// Middleware to parse JSON
app.use(express.json());

// Log the environment and database connection status
console.log('Environment:', process.env.NODE_ENV);
console.log('Database URL:', process.env.DATABASE_URL ? 'Connected' : 'Not connected');

// API endpoint
app.get('/api/status', (req, res) => {
  res.json({
    status: 'online',
    environment: process.env.NODE_ENV,
    databaseConnected: Boolean(process.env.DATABASE_URL),
    version: '1.0.0'
  });
});

// Basic health check endpoint
app.get('/health', (req, res) => {
  --update-secrets="DATABASE_URL=database-url:latest"{port}`); ? 'Connected' : 'Not connected'}</p>
Building using Dockerfile and deploying container to Cloud Run service [appointease] in project [appointease-prod-457922] region [southamerica-west1]
|  Building and deploying... Uploading sources.                                                                                                                                             
  |  Uploading sources...                                                                                                                                                                   
X  Building and deploying... Building Container.                                                                                                                                            
  OK Uploading sources...                                                                                                                                                                   
  OK Building Container... Logs are available at [https://console.cloud.google.com/cloud-build/builds;region=southamerica-west1/a8e82b9d-dfe5-4b9f-8f1f-c05d1adb3b90?project=249754346416]. 
  .  Setting IAM Policy...                                                                                                                                                                  
Creating temporary archive of 4 file(s) totalling 2.2 KiB before compression.
Uploading zipfile of [.] to [gs://run-sources-appointease-prod-457922-southamerica-west1/services/appointease/1745797398.546387-19242ab3d99044579a5e82dd3476411c.zip]
Deployment failed                                                                                                                                                                           
ERROR: (gcloud.run.deploy) spec.template.spec.containers[0].env: The following reserved env names were provided: PORT. These values are automatically set by the system.
saasb2c1@cloudshell:~/business-management-system/simplified-app (appointease-prod-457922)$ 