saasb2c1@cloudshell:~/business-management-system/simplified-app (appointease-prod-457922)$ # Go to the simplified app directory
cd ~/business-management-system/simplified-app

# Create a simplified package.json to reduce installation time
cat > package.json << 'EOF'
{
  "name": "appointease",
  "version": "1.0.0",
  "description": "AppointEase - Business Management System",
  "main": "index.js",
  "scripts": {
    "start": "node index.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "express-session": "^1.17.3",
    "memorystore": "^1.6.7",
    "pg": "^8.11.3"
  }
}
EOF

# Simplify the Dockerfile to make it faster
cat > Dockerfile << 'EOF'
FROM node:20-slim

# Install the bare minimum
RUN apt-get update && apt-get install -y wget

# Download and set up Cloud SQL Auth Proxy
RUN wget https://dl.google.com/cloudsql/cloud_sql_proxy.linux.amd64 -O /usr/bin/cloud_sql_proxy && \
    chmod +x /usr/bin/cloud_sql_proxy

WORKDIR /app
COPY package.json .
RUN npm install --production
  --add-cloudsql-instances=${INSTANCE_CONNECTION_NAME}ppointease-secret-key,CLOUD_SQL_CONNECTION_NAME=${INSTANCE_CONNECTION_NAME}" \
Your active configuration is: [cloudshell-14847]
Building using Dockerfile and deploying container to Cloud Run service [appointease] in project [appointease-prod-457922] region [southamerica-west1]
/  Building and deploying... Uploading sources.                                                                                                                                             
-  Building and deploying... Uploading sources.                                                                                                                                             
OK Building and deploying... Done.                                                                                                                                                          
  OK Uploading sources...                                                                                                                                                                   
  OK Building Container... Logs are available at [https://console.cloud.google.com/cloud-build/builds;region=southamerica-west1/307a375d-731f-4958-a493-9e43138d564f?project=249754346416]. 
  OK Creating Revision...                                                                                                                                                                   
  OK Routing traffic...                                                                                                                                                                     
  OK Setting IAM Policy...                                                                                                                                                                  
Done.                                                                                                                                                                                       
Service [appointease] revision [appointease-00058-7cj] has been deployed and is serving 100 percent of traffic.
Service URL: https://appointease-249754346416.southamerica-west1.run.app
saasb2c1@cloudshell:~/business-management-system/simplified-app (appointease-prod-457922)$ 